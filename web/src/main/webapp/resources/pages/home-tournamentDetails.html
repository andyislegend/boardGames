<div id="main_wrapper">

    <div id="left_wrapper">

        <div id="up_wrapper">
        <img alt="tournament" src="resources/images/icon-tournament.png" style="width: 25%; height: 50%;float:right; margin: 2% 2%;">
        
		<div style = "padding:2% 2%;">
				<h2>{{status}}</h2>
				<h1>{{tournament.tournamentName}}</h1>
				<p>Count of participants: {{tournamentParticipants.length}} of {{tournament.countOfParticipants}}</p>
				<p>User creator: {{tournament.userCreatorName}}</p>
				<p>date of tournament: {{tournament.dateOfTournament | date:'yyyy-MM-dd'}}</p>	
				<a data-toggle="modal" data-target="#showTournamentBrackets"> show tournament brackets</a>		
				<div style="margin: auto auto">
				<button ng-disabled = "!joinStatus" ng-click = "joinToTournament(tournament.tournamentId)" class="btn btn-info">Join</button>
				<button ng-disabled = "!quitStatus" ng-click = "leaveTournament(tournament.tournamentId)" class="btn btn-info">Quit</button>
        		
        		</div>      		
        </div>       
        </div>

        
        <a ng-click = "showAdminTools = !showAdminTools"> d</a>
			<div id="down_wrapper" ng-show = "showAdminTools">
			<div ng-show = "isCreator" class="form-group">
				<form>
				<span style="margin: auto auto; width: 40px">Change date of Tournaments</span>
				<input type = "date" class="form-control" data-ng-model = "changeTournamentDate">
				<input type = "submit" class="btn btn-default" value="Change" ng-click = "changeDataOfTournament()">
				</form>	
			<button  type="button" class="btn btn-default" ng-disabled = "!isOpenGiveRate" data-toggle="modal" ng-click = "updateTournamentParticipantsInfo()" data-target="#giveRateModal">Give a rate</button>
			<button type ="button" class="btn btn-default" data-toggle="modal" data-target = "#deleteTournament">Delete this tournament</button>
			<button type ="button" class="btn btn-default" ng-disabled = "tournament.tableGenerated" ng-click = "generateTournamentTable()">Generete this tournament</button>
		</div>
		<div>
		</div>
        </div>
    </div>

    
    <div id="right_wrapper">
		<table class = "table" id ="table-showParticipants" style="width: 100%">
			<tr><th>Participants<th><th>Rating<th></tr>
			<tr ng-repeat = "user in tournamentParticipants"><td>{{user.username}}<td><td>{{user.userRating}}<td></tr>
		</table>
    </div>

    <div style="clear: both;"></div>

<div id="giveRateModal" class="modal fade" role="dialog">
  <div class="modal-dialog"> 
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" ng-click = "changeStatusToRate()" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
       <table class = "table">
		<tr><th>User</th><th>Mark</th><th>Give Mark</th></tr>
		<form>
			<tr ng-repeat = "user in participantsForRate">
				<td>{{user.username}}</td>
				<td><input type="number" min="-2" max="3" ng-model = "rate"></td>
				<td><button ng-click = "giveRate(user.id, rate)" ng-disabled = "user.tournamentRatingStatus">Rate</button></td>
			</tr>
		</form>
		</table>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>		
  </div>
</div>

<div id="deleteTournament" class="modal fade" role="dialog">
  <div class="modal-dialog"> 
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" ng-click = "changeStatusToRate()" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
       <h2>Are you really want to delete this tournamet?</h2>
      </div>
      <div class="modal-footer">
      	<a href = "#tournaments"><button ng-click = "deleteTournament(tournament.tournamentId)" type="button" class="btn btn-default">Yes</button></a>
        <button type="button" class="btn btn-default" data-dismiss="modal">No</button>
      </div>
    </div>		
  </div>
</div>

<div id="attentionToChangeData" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Attention!</h4>
      </div>
      <div class="modal-body">
        <p>You can not change on past data</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div id="showTournamentBrackets" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="wrapper">
    	<div class="brackets">
    	
    </div>

</div>
<script src="resources/js/jquery-1.11.3.js"></script>
    <script src="resources/js/brackets.min.js"></script>
    	<script>
var rounds;

rounds = [


    //-- ronda 1
    [

        {
            player1: { name: "Player 111", winner: true,  url: 'http://www.google.com' },
            player2: { name: "Player 211", ID: 211 }
        },

        {
            player1: { name: "Player 112", winner: true, ID: 112 },
            player2: { name: "Player 212", ID: 212 }
        },

        {
            player1: { name: "Player 113", winner: true, ID: 113 },
            player2: { name: "Player 213", ID: 213 }
        },

        {
            player1: { name: "Player 114", winner: true, ID: 114 },
            player2: { name: "Player 214", ID: 214 }
        },

        {
            player1: { name: "Player 115", winner: true, ID: 115, url: 'goggle.com' },
            player2: { name: "Player 215", ID: 215 }
        },

        {
            player1: { name: "Player 116", winner: true, ID: 116 },
            player2: { name: "Player 216", ID: 216 }
        },

        {
            player1: { name: "Player 117", winner: true, ID: 117 },
            player2: { name: "Player 217", ID: 217 }
        },

        {
            player1: { name: "Player 118", winner: true, ID: 118 },
            player2: { name: "Player 218", ID: 218 }
        },
    ],

    //-- ronda 2
    [

        {
            player1: { name: "Player 111", winner: true, ID: 111 },
            player2: { name: "Player 212", ID: 212 }
        },

        {
            player1: { name: "Player 113", winner: true, ID: 113 },
            player2: { name: "Player 214", ID: 214 }
        },

        {
            player1: { name: "Player 115", winner: true, ID: 115 },
            player2: { name: "Player 216", ID: 216 }
        },

        {
            player1: { name: "Player 117", winner: true, ID: 117 },
            player2: { name: "Player 218", ID: 218 }
        },
    ],

    //-- ronda 3
    [

        {
            player1: { name: "Player 111", winner: true, ID: 111 },
            player2: { name: "Player 113", ID: 113 }
        },

        {
            player1: { name: "Player 115", winner: true, ID: 115 },
            player2: { name: "Player 218", ID: 218 }
        },
    ],

    //-- ronda 4
    [

        {
            player1: { name: "Player 113", winner: true, ID: 113 },
            player2: { name: "Player 218", winner: true, ID: 218 },
        },
    ],
    //-- Champion
    [

        {
            player1: { name: "Player 113", winner: true, ID: 113 },
        },
    ],

];

var titles = ['Ronda 1', 'Ronda 2', 'Ronda 3', 'Ronda 4', 'Ronda 5'];


;(function($){

    $(".brackets").brackets({
        titles: titles,
        rounds: rounds,
        color_title: 'black',
        border_color: '#00F',
        color_player: 'black',
        bg_player: 'white',
        color_player_hover: 'white',
        bg_player_hover: 'blue',
        border_radius_player: '10px',
        border_radius_lines: '10px',
    });

})(jQuery);
</script>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>
</div>